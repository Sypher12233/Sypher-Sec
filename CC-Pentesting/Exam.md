# Given ip=10.10.46.72 #

> running nmap scan

```ZSH
> └─$ nmap -A 10.10.46.72                                   
Starting Nmap 7.92 ( https://nmap.org ) at 2022-03-19 14:48 EDT
Nmap scan report for 10.10.46.72
Host is up (0.22s latency).
Not shown: 998 closed tcp ports (conn-refused)
PORT   STATE SERVICE VERSION
22/tcp open  ssh     OpenSSH 7.2p2 Ubuntu 4ubuntu2.8 (Ubuntu Linux; protocol 2.0)
| ssh-hostkey: 
|   2048 12:96:a6:1e:81:73:ae:17:4c:e1:7c:63:78:3c:71:1c (RSA)
|   256 6d:9c:f2:07:11:d2:aa:19:99:90:bb:ec:6b:a1:53:77 (ECDSA)
|_  256 0e:a5:fa:ce:f2:ad:e6:fa:99:f3:92:5f:87:bb:ba:f4 (ED25519)
80/tcp open  http    Apache httpd 2.4.18 ((Ubuntu))
|_http-title: Apache2 Ubuntu Default Page: It works
|_http-server-header: Apache/2.4.18 (Ubuntu)
Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel

Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .
Nmap done: 1 IP address (1 host up) scanned in 37.17 seconds
```

> What we are doing

* We have two open ports using only the `-A` tag.
* Now lets try the `nmap -A -T4 10.10.46.72 -p-` to scan all the ports, and see if we get anything different.
* As the scan is going we can also use gobuster to try and find any hidden directories, by typing `gobuster dir --url 10.10.46.72 -w /usr/share/wordlists/dirb/common.txt`
  
```ZSH
2022/03/26 14:07:25 Starting gobuster in directory enumeration mode
===============================================================
/.hta                 (Status: 403) [Size: 278]
/.htaccess            (Status: 403) [Size: 278]
/.htpasswd            (Status: 403) [Size: 278]
/index.html           (Status: 200) [Size: 11321]
/secret               (Status: 301) [Size: 315] [--> http://10.10.198.151/secret/]
/server-status        (Status: 403) [Size: 278]  
```

* Now we can enumerate further with the information we got from this dir brute force.
* We can run another dir brute force with some changes like `gobuster -u http://10.10.198.151/secret/ -w /usr/share/wordlists/dirb/common.txt -x txt` we use '-x txt' to check for files with 'txt' extension.
* And we get a `.htaccess.txt and .htpasswd.txt` file.
* Which we can't access, for now!
* We also got a file named `/secret.txt` which has a username and a password hash.
* We can try and crack it using hashcat.
* Apparently the password is also nyan.
* We can ssh with the credentials 'nyan:nyan' and get the first flag.
* For the root.txt flag we need to have root permissions and for that we need to escalate our privileges.
* We can try and use metasploit to see if it can help.
* Frankly we don't need to escalate privileges as we can just run `sudo su` and we get root!
